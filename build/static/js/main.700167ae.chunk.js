(this["webpackJsonphousingram-auth"]=this["webpackJsonphousingram-auth"]||[]).push([[0],{153:function(e,s,t){"use strict";t.r(s);var a=t(0),r=t.n(a),c=t(48),o=t.n(c),n=t(47),l=t(9),i=t(164),j=t(40);const m=new j.d({UserPoolId:"ap-south-1_R7qEwjagO",ClientId:"2a3498ir6ad8acsc7rono1uepa"});var d=()=>{const e=Object(l.o)();return Object(a.useEffect)((()=>{(async()=>{try{await m.getCurrentUser().signOut(),localStorage.removeItem("accessToken"),i.a.success("Logged out successfully"),e("/login")}catch(s){console.error("Error logging out:",s),i.a.error("Error logging out")}})()}),[e]),null},b=t(163),u=t(162),h=t(165),O=t(129),x=t(167),g=t(8);const{Title:p}=b.a;var w=()=>{const[e]=u.a.useForm(),[s,t]=Object(a.useState)(!1),r=Object(l.o)();return Object(g.jsxs)("div",{style:{maxWidth:400,margin:"0 auto"},children:[Object(g.jsx)(p,{level:2,children:"Login"}),Object(g.jsxs)(u.a,{form:e,onFinish:async e=>{t(!0);const{email:s,password:a}=e,c={Username:s,Password:a},o=new j.a(c);new j.b({Username:s,Pool:m}).authenticateUser(o,{onSuccess:e=>{const s=e.getAccessToken().getJwtToken();localStorage.setItem("accessToken",s),i.a.success("Login successful"),r("/authenticated")},onFailure:e=>{i.a.error(e.message),t(!1)}})},children:[Object(g.jsx)(u.a.Item,{name:"email",rules:[{required:!0,type:"email",message:"Please enter a valid email address"}],children:Object(g.jsx)(h.a,{placeholder:"Email"})}),Object(g.jsx)(u.a.Item,{name:"password",rules:[{required:!0,message:"Please enter your password"}],children:Object(g.jsx)(h.a.Password,{placeholder:"Password"})}),Object(g.jsx)(u.a.Item,{children:Object(g.jsx)(O.a,{type:"primary",htmlType:"submit",loading:s,block:!0,children:"Login"})}),Object(g.jsx)(u.a.Item,{children:Object(g.jsxs)(x.a,{children:[Object(g.jsx)(n.b,{to:"/forgot-password",children:"Forgot Password?"}),Object(g.jsx)(n.b,{to:"/register",children:"Sign Up"})]})})]})]})},y=t(168);const{Title:P,Paragraph:f}=b.a;var v=()=>Object(g.jsxs)("div",{style:{maxWidth:600,margin:"0 auto",textAlign:"center"},children:[Object(g.jsx)(P,{children:"Welcome!"}),Object(g.jsx)(f,{children:"You are logged in."}),Object(g.jsx)(O.a,{type:"primary",icon:Object(g.jsx)(y.a,{}),children:Object(g.jsx)(n.b,{to:"/logout",style:{color:"white"},children:"Logout"})})]});const{Title:I}=b.a;var S=()=>{const[e]=u.a.useForm(),[s,t]=Object(a.useState)(!1),r=Object(l.o)();return Object(g.jsxs)("div",{style:{maxWidth:400,margin:"0 auto"},children:[Object(g.jsx)(I,{level:2,children:"Confirm Registration"}),Object(g.jsxs)(u.a,{form:e,onFinish:e=>{t(!0);const{confirmationCode:s}=e;new j.b({Username:localStorage.getItem("email"),Pool:m}).confirmRegistration(s,!0,((e,s)=>{e?i.a.error(e.message):(i.a.success("Registration confirmed successfully."),r("/login")),t(!1)}))},children:[Object(g.jsx)(u.a.Item,{name:"confirmationCode",rules:[{required:!0,message:"Please enter the confirmation code"}],children:Object(g.jsx)(h.a,{placeholder:"Confirmation Code"})}),Object(g.jsx)(u.a.Item,{children:Object(g.jsx)(O.a,{type:"primary",htmlType:"submit",loading:s,block:!0,children:"Confirm"})})]})]})};const{Title:T}=b.a;var F=()=>{const[e]=u.a.useForm(),[s,t]=Object(a.useState)(!1),r=Object(l.o)();return Object(g.jsxs)("div",{style:{maxWidth:400,margin:"0 auto"},children:[Object(g.jsx)(T,{level:2,children:"Register"}),Object(g.jsxs)(u.a,{form:e,onFinish:async e=>{t(!0);const{email:s,password:a,name:c}=e,o=[new j.c({Name:"email",Value:s}),new j.c({Name:"name",Value:c})];try{await new Promise(((e,t)=>{m.signUp(s,a,o,null,((s,a)=>{s?t(s):e(a)}))})),i.a.success("Registration successful. Please check your email for verification."),localStorage.setItem("email",s),r("/confirmation")}catch(n){i.a.error(n.message)}finally{t(!1)}},children:[Object(g.jsx)(u.a.Item,{name:"email",rules:[{required:!0,type:"email",message:"Please enter a valid email address"}],children:Object(g.jsx)(h.a,{placeholder:"Email"})}),Object(g.jsx)(u.a.Item,{name:"password",rules:[{required:!0,min:6,message:"Password must be at least 6 characters"}],children:Object(g.jsx)(h.a.Password,{placeholder:"Password"})}),Object(g.jsx)(u.a.Item,{name:"name",rules:[{required:!0,message:"Please enter your name"}],children:Object(g.jsx)(h.a,{placeholder:"Name"})}),Object(g.jsx)(u.a.Item,{children:Object(g.jsx)(O.a,{type:"primary",htmlType:"submit",loading:s,block:!0,children:"Register"})})]})]})};const{Title:k}=b.a;var E=()=>{const[e]=u.a.useForm(),[s,t]=Object(a.useState)(!1),r=Object(l.o)();return Object(g.jsxs)("div",{style:{maxWidth:400,margin:"0 auto"},children:[Object(g.jsx)(k,{level:2,children:"Forgot Password"}),Object(g.jsxs)(u.a,{form:e,onFinish:async e=>{t(!0);const{email:s}=e;new j.b({Username:s,Pool:m}).forgotPassword({onSuccess:e=>{i.a.success("Password reset code sent successfully"),r("/reset-password",{state:{email:s}})},onFailure:e=>{i.a.error(e.message),t(!1)}})},children:[Object(g.jsx)(u.a.Item,{name:"email",rules:[{required:!0,type:"email",message:"Please enter a valid email address"}],children:Object(g.jsx)(h.a,{placeholder:"Email"})}),Object(g.jsx)(u.a.Item,{children:Object(g.jsx)(O.a,{type:"primary",htmlType:"submit",loading:s,block:!0,children:"Submit"})})]})]})};const{Title:q}=b.a;var R=()=>{var e;const[s]=u.a.useForm(),[t,r]=Object(a.useState)(!1),c=Object(l.o)(),o=null===(e=Object(l.m)().state)||void 0===e?void 0:e.email;return Object(g.jsxs)("div",{style:{maxWidth:400,margin:"0 auto"},children:[Object(g.jsx)(q,{level:2,children:"Reset Password"}),Object(g.jsxs)(u.a,{form:s,onFinish:async e=>{r(!0);const{code:s,newPassword:t}=e;new j.b({Username:o,Pool:m}).confirmPassword(s,t,{onSuccess:()=>{i.a.success("Password reset successfully"),c("/login")},onFailure:e=>{i.a.error(e.message),r(!1)}})},children:[Object(g.jsx)(u.a.Item,{name:"code",rules:[{required:!0,message:"Please enter the reset code"}],children:Object(g.jsx)(h.a,{placeholder:"Reset Code"})}),Object(g.jsx)(u.a.Item,{name:"newPassword",rules:[{required:!0,min:6,message:"Password must be at least 6 characters"}],children:Object(g.jsx)(h.a.Password,{placeholder:"New Password"})}),Object(g.jsx)(u.a.Item,{children:Object(g.jsx)(O.a,{type:"primary",htmlType:"submit",loading:t,block:!0,children:"Reset Password"})})]})]})};var U=()=>{const[e,s]=r.a.useState(!1);return r.a.useEffect((()=>{const e=()=>{const e=localStorage.getItem("accessToken");s(null!==e)};return e(),window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}),[]),Object(g.jsx)(n.a,{children:Object(g.jsxs)(l.c,{children:[Object(g.jsx)(l.a,{path:"/",element:Object(g.jsx)(F,{})}),Object(g.jsx)(l.a,{path:"/register",element:Object(g.jsx)(F,{})}),Object(g.jsx)(l.a,{path:"/logout",element:Object(g.jsx)(d,{})}),Object(g.jsx)(l.a,{path:"/login",element:Object(g.jsx)(w,{})}),Object(g.jsx)(l.a,{path:"/confirmation",element:Object(g.jsx)(S,{})}),Object(g.jsx)(l.a,{path:"/forgot-password",element:Object(g.jsx)(E,{})}),Object(g.jsx)(l.a,{path:"/reset-password",element:Object(g.jsx)(R,{})}),Object(g.jsx)(l.a,{path:"/authenticated",element:Object(g.jsx)(v,{})})]})})};o.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(U,{})}),document.getElementById("root"))}},[[153,1,2]]]);
//# sourceMappingURL=main.700167ae.chunk.js.map